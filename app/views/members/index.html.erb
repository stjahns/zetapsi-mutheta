<% provide(:title, 'Members') %>

<h1>Active Members</h1>

<div class="row members-list">
  <% @members.each do |member| %>
    <div class="col-sm-4 col-md-3 col-lg-2">
      <%= link_to member, title: member.name do %>

        <div class="thumbnail member_thumb">
          <%= image_tag member.profile_photo.url(:thumb) %>
          <div class='caption'>
            <h4><%= member.name %></h4>
            <p><em><%= member.position %></em></p>
            <p>
            <% if signed_in? %>
              <%= link_to 'Edit', edit_member_path(member) %>
              <%= link_to 'Delete', member_path(member),
                method: :delete, data: { confirm: 'Are you sure?' } %>
            <% end %>
            </p>
          </div>
        </div>

      <% end %>
    </div>
  <% end %>
</div>

<% if signed_in? %>
  <h3>Invite New Members</h3>
  <div class="container form-wrapper">
    <%= form_for @invitation, class: 'form-horizontal' do |form| %>
      <div class="form-group">
        <%= form.label :name, class: "col-sm-2 control-label text-right" %>
        <div class="col-sm-10">
          <%= form.text_field :name, class: "form-control"%>
        </div>
      </div>
      <div class="form-group">
        <%= form.label :email, class: "col-sm-2 control-label text-right" %>
        <div class="col-sm-10">
          <%= form.text_field :email, class: "form-control"%>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <%= form.submit "Invite", class: "btn btn-default" %>
        </div>
      </div>
    <% end %>
  </div>

  <h4>Pending Invitations</h4>

  <% if @invitations.count == 0 %>
    <em>No pending invitations</em>
  <% end %>

  <% @invitations.each do |invite| %>
    <div class="row">
      <div class="col-sm-2 text-right"><strong><%= invite.name %></strong></div>
      <div class="col-sm-2 text-center"><%= invite.email %></div>
      <div class="col-sm-8">
        <%= link_to 'Cancel', invitation_path(invite),
          method: :delete, data: { confirm: 'Are you sure?' } %>
      </div>
    </div>
  <% end %>
<% end %>
